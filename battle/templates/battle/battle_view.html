{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Battle Arena</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background-color: #f3f0e6;
      padding: 40px;
      text-align: center;
    }
    .fighter-box {
      display: inline-block;
      width: 40%;
      padding: 20px;
      margin: 20px;
      background-color: #fff;
      border: 2px solid #444;
      border-radius: 10px;
    }
    .fighter-name {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    .hp {
      font-weight: bold;
      color: #900;
    }
    .message {
      font-size: 1.2em;
      margin: 20px 0;
      color: #333;
    }
    .actions form {
      display: inline-block;
      margin: 0 10px;
    }
    button {
      font-size: 1em;
      padding: 10px 20px;
      border: none;
      background-color: #444;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #333;
    }
    .return-link {
      margin-top: 30px;
      display: block;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>‚öîÔ∏è Battle Arena</h1>

  <div class="fighter-box">
    <div class="fighter-name">{{ fighter_1.name }} {{ fighter_1.nickname }}</div>
    <p class="hp">Health: {{ fighter_1.health }}/{{ fighter_1.max_health }}</p>
  </div>

  <div class="fighter-box">
    <div class="fighter-name">{{ fighter_2.name }} {{ fighter_2.nickname }}</div>
    <p class="hp">Health: {{ fighter_2.health }}/{{ fighter_2.max_health }}</p>
  </div>

  {% if message %}
    <div class="message"><p>{{ message|safe }}</p>
    </div>
  {% endif %}

  {% if "wins the battle" in message %}
    <a class="return-link" href="{% url 'start_journey_view' fighter_1.id %}">üè† Return to Village</a>
  {% elif turn == "fighter_1" %}
    <div class="actions">
      <form method="post">
        {% csrf_token %}
        <button name="action" value="light">‚öîÔ∏è Light Attack</button>
      </form>
      <form method="post">
        {% csrf_token %}
        <button name="action" value="normal">‚öîÔ∏è Normal Attack</button>
      </form>
      <form method="post">
        {% csrf_token %}
        <button name="action" value="heavy">‚öîÔ∏è Heavy Attack</button>
      </form>
      <form method="post">
        {% csrf_token %}
        <button name="action" value="heal">üíä Heal</button>
      </form>
      <form method="post">
        {% csrf_token %}
        <button name="action" value="rest">Rest</button>
      </form>
    </div>

  {% else %}
    <form method="post">
      {% csrf_token %}
      <button name="action" value="enemy_turn">‚ñ∂Ô∏è Enemy Turn</button>
    </form>
  {% endif %}

  <div class="character-panel">
    <h2>{{ fighter_1.name }} Level {{ fighter_1.level }}</h2>

    <p><strong>‚≠ê XP:</strong> {{ fighter_1.xp_points }} / {{ fighter_1.xp_to_next_level }}</p>
    <div class="bar-container">
      <div class="bar-fill" style="width: {{ fighter_1.xp_percent }}%; background: linear-gradient(to right, #4caf50, #81c784);"></div>
    </div>

    <p><strong>‚ù§Ô∏è Health:</strong> {{ fighter_1.health }} / {{ fighter_1.max_health }}</p>
    <div class="bar-container">
      <div class="bar-fill" style="width: {{ fighter_1.health_percent }}%; background: linear-gradient(to right, #e53935, #ef5350);"></div>
    </div>

    <p><strong>‚ö° Stamina :</strong> {{ fighter_1.stamina }} / {{ fighter_1.max_stamina }}</p>

    <p><strong>üí∞ Gold:</strong> {{ fighter_1.money }} drachmae</p>
    {% if fighter_1.equipped_weapon %}
      <p><strong>‚öîÔ∏è Weapon:</strong> {{ fighter_1.equipped_weapon.name }}</p>
    {% endif %}

    {% if fighter_1.chest %}
      <p><strong>üõ°Ô∏è Chest Armor:</strong> {{ fighter_1.chest.name }}</p>
    {% endif %}
  </div>

</body>
</html>
